(this.webpackJsonptravelata=this.webpackJsonptravelata||[]).push([[0],[,,,,,,,,,,,function(t,e,c){},function(t,e,c){},function(t,e,c){},function(t,e,c){},function(t,e,c){},function(t,e,c){},function(t,e,c){},function(t,e,c){"use strict";c.r(e);var n=c(0),r=c(1),a=c.n(r),o=c(5),s=c.n(o),d=(c(11),c(2));c(12),c(13);var i=function(t){var e=t.content,c=t.clickHandler,r=t.id,a=t.disabled,o=t.operation,s=t.classButton;return Object(n.jsx)("button",{onClick:function(){return c(r,o)},className:"button "+(a?"button--disabled ":"")+s,disabled:a,children:e})},u=(c(14),c(15),a.a.createContext()),l=c(4);var j=function(t){var e=t.card,c=t.index,a=Object(r.useContext)(u).setCart,o=e.amount-(e.countAddToCart||0),s=e.maxPerPerson===(e.countAddToCart||0),d=!o||s,j=o>0&&s,b=e.productName;return Object(n.jsxs)("li",{className:"card",children:[Object(n.jsxs)("p",{className:"card__wrap",children:[Object(n.jsx)("b",{className:"card__index",children:c+1}),Object(n.jsxs)("span",{className:"card__text",children:["\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c ",o," ",l(o,b,b+"a",b+"\u043e\u0432")," \u043f\u043e ",e.price," \u0440\u0443\u0431\u043b\u0435\u0439"]}),Object(n.jsx)(i,{id:e.id,disabled:d,clickHandler:a,classButton:"card__button",operation:"add",content:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]}),j&&Object(n.jsxs)("span",{className:"card__max-per-person",children:["\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u0432\u0430\u0440 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d \u0437\u0430 \u043e\u0434\u043d\u0443 \u043f\u043e\u043a\u0443\u043f\u043a\u0443. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0441\u0442\u0438 \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 ",e.maxPerPerson," \u0448\u0442."]})]})};var b=function(t){var e=t.cards,c=t.categoryCount;return Object(n.jsxs)("section",{className:"card-list",children:[Object(n.jsxs)("h2",{children:["\u0418\u043c\u0435\u044e\u0449\u0438\u0435\u0441\u044f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 ",c]}),Object(n.jsx)("ul",{className:"card-list__list",children:e.map((function(t,e){return Object(n.jsx)(j,{card:t,index:e},t.id)}))})]})};c(16);var f=function(t){var e=t.card,c=t.count,a=t.sum,o=Object(r.useContext)(u).setCart,s=e.maxPerPerson===(e.countAddToCart||0);return Object(n.jsx)("li",{className:"cart-item",children:Object(n.jsxs)("p",{className:"cart-item__wrap",children:[e.productName," (",Object(n.jsx)(i,{id:e.id,clickHandler:o,classButton:"cart-item__button-remove",operation:"remove",content:"-"}),c," \u0448\u0442",Object(n.jsx)(i,{id:e.id,clickHandler:o,disabled:s,classButton:"cart-item__button-add",operation:"add",content:"+"}),") \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 ",a," \u0440\u0443\u0431\u043b\u0435\u0439",Object(n.jsx)(i,{id:e.id,clickHandler:o,classButton:"cart-item__clear",operation:"clear",content:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"})]})})},x=(c(17),c(4));var m=function(t){var e=t.cards.filter((function(t){return t.countAddToCart})),c=e.reduce((function(t,e){return t+e.countAddToCart*e.price}),0),r=e.reduce((function(t,e){return t+e.countAddToCart}),0);return Object(n.jsx)("div",{className:"cart",children:e.length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("h2",{children:["\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 ",r," ",x(r,"\u0442\u043e\u0432\u0430\u0440","\u0442\u043e\u0432\u0430\u0440\u0430","\u0442\u043e\u0432\u0430\u0440\u043e\u0432")," \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 ",c," \u0440\u0443\u0431\u043b\u0435\u0439"]}),Object(n.jsx)("ol",{children:e.map((function(t,e){return Object(n.jsx)(f,{card:t,index:e,count:t.countAddToCart,sum:t.price*t.countAddToCart},t.id)}))})]}):Object(n.jsx)("p",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})})};function O(t,e){if(!e)return JSON.parse(localStorage.getItem(t));localStorage.setItem(t,JSON.stringify(e))}function h(){localStorage.clear(),window.location.reload()}var p=function(){var t=a.a.useState(O("cards")||[]),e=Object(d.a)(t,2),c=e[0],o=e[1],s=a.a.useState(!0),l=Object(d.a)(s,2),j=l[0],f=l[1],x=a.a.useState(0),p=Object(d.a)(x,2),v=p[0],C=p[1];function _(t){return t.filter((function(t){return function(t){var e=t.countAddToCart||0;return t.amount-e>0&&t.maxPerPerson-e>0}(t)})).length}function N(t){o(t),C(_(t)),f(!1)}return Object(r.useEffect)((function(){c.length?N(c):fetch("".concat("https://my-json-server.typicode.com","/").concat("alex-koshara/travelata_testing/products","?_limit=").concat(5)).then((function(t){return t.json()})).then((function(t){N(t)}))}),[]),Object(r.useEffect)((function(){C(_(c)),o(c),O("cards",c)}),[c]),Object(n.jsx)(u.Provider,{value:{setCart:function(t,e){var n=function(t,e){return t.find((function(t){return t.id===e}))}(c,t);!function(t,e){switch(t.countAddToCart=t.countAddToCart||0,e){case"add":return t.countAddToCart++;case"remove":return t.countAddToCart--;case"clear":default:t.countAddToCart=0}}(n,e),o(c.map((function(t){return t.id===n.id&&(c.countAddToCart=n.countAddToCart),t})))}},children:Object(n.jsx)("div",{className:"container",children:c.length?Object(n.jsxs)("div",{className:"main",children:[Object(n.jsx)(b,{cards:c,categoryCount:v}),Object(n.jsx)(m,{cards:c}),Object(n.jsx)(i,{clickHandler:h,classButton:"button--clear",operation:"clear",content:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c localStorage"})]}):j?null:Object(n.jsx)("p",{children:"No cards"})})})};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(p,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.ca474c17.chunk.js.map